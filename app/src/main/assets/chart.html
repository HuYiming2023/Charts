<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>3D Pie Chart Viewer</title>
    <script src="https://cdn.anychart.com/releases/v8/js/anychart-bundle.min.js"></script>
    <style>
        html, body {
          margin: 0;
          padding: 0;
          background-color: white;
        }
        #container {
          width: 100%;
          height: 100vh;
        }
    </style>
</head>
<body>
<div id="container"></div>
<script>

    function getQueryParam(name) {
      const urlParams = new URLSearchParams(window.location.search);
      return urlParams.get(name);
    }


    const encoded = getQueryParam("data");
    if (encoded) {
      try {
        const decoded = decodeURIComponent(encoded);
        const data = JSON.parse(decoded);

        const chart = anychart.pie3d(data);
        chart.innerRadius("0%");
        chart.startAngle(0);
        chart.labels()
          .position("outside")
          .format("{%x}: {%value} ({%percentValue}%)")
          .fontSize(14)
          .fontColor("#333");

        chart.legend(true);
        chart.height("100%");
        chart.container("container");
        chart.draw();
      } catch (e) {
        document.body.innerHTML = "<pre>Error parsing data:\n" + e + "</pre>";
      }
    } else {
      document.body.innerHTML = "<h3>No data provided</h3>";
    }
</script>
</body>
</html>

